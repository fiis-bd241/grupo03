# Sentencias SQL por cada Prototipo

## Gestión de Pedidos

### Visualización de Pedidos de Migración

---

**Código Requerimiento:** R-010, R-011

**Código Interfaz:** I-010

**Imagen Interfaz**

<div>
<img src=".\resources\prototipo\I-010.jpeg" alt="I-010" style="width: 50%; height: auto;"/>
</div>

**Sentencias SQL**

**Eventos:**

1. **Carga de Página:**

    Se llenará la primera tabla:
    ```sql
    SELECT 
        p."Pedido_Id" AS "Pedido",
        a."Area_Nombre" AS "Área Solicitante",
        e."Estado_Tipo" AS "Estado",
        pr."Prioridad_Tipo" AS "Prioridad",
        p."Pedido_Fecha" AS "Fecha del Pedido", 
        p."Pedido_FechaLimite" AS "Fecha Límite"
    FROM public."Pedido" p
    INNER JOIN public."Area" a ON a."Area_Id" = p."Area_Id"
    INNER JOIN public."Estado" e ON e."Estado_Id" = p."Estado_Id"
    INNER JOIN public."Prioridad" pr ON p."Prioridad_Id" = p."Prioridad_Id"
    ORDER BY p."Pedido_FechaLimite" DESC
    LIMIT 3;
    ```

    Se llenará la segunda tabla:
    ```sql
    SELECT
        m."Migracion_Id" AS "Migración",
        m."Pedido_Id" AS "Pedido",
        s.nombre_squad AS "Squad Encargado", 
        t.nombre_tecnologia AS "Tecnología Usada",
        m."Fecha_migracion" AS "Fecha"
    FROM public."Migracion" m
    INNER JOIN public."Squad" s ON s.id_squad = m."Id_Squad"
    INNER JOIN public."Tecnologia" t ON t.id_tecnologia = m."Id_Tecnologia"
    ORDER BY m."Fecha_migracion" DESC
    LIMIT 3;
    ```

---

**Código Requerimiento:** R-010

**Código Interfaz:** I-011

**Imagen Interfaz**

<div>
<img src=".\resources\prototipo\I-011.jpeg" alt="I-011" style="width: 50%; height: auto;"/>
</div>

**Sentencias SQL**

**Eventos:**

1. **Carga de Página:**

    Se llenará la tabla:
    ```sql
    SELECT 
        p."Pedido_Id" AS "Pedido",
        a."Area_Nombre" AS "Área Solicitante",
        e."Estado_Tipo" AS "Estado",
        pr."Prioridad_Tipo" AS "Prioridad",
        p."Pedido_Fecha" AS "Fecha del Pedido", 
        p."Pedido_FechaLimite" AS "Fecha Límite"
    FROM public."Pedido" p
    INNER JOIN public."Area" a ON a."Area_Id" = p."Area_Id"
    INNER JOIN public."Estado" e ON e."Estado_Id" = p."Estado_Id"
    INNER JOIN public."Prioridad" pr ON p."Prioridad_Id" = p."Prioridad_Id"
    ORDER BY p."Pedido_FechaLimite" DESC;
    ```

---

**Código Requerimiento:** R-010

**Código Interfaz:** I-011

**Imagen Interfaz**

<div>
<img src=".\resources\prototipo\I-011.jpeg" alt="I-011" style="width: 50%; height: auto;"/>
</div>

**Sentencias SQL**

**Eventos:**

1. **Carga de Página:**
    Se llenará la tabla:
    ```sql
    SELECT 
        p."Pedido_Id" AS "Pedido",
        a."Area_Nombre" AS "Área Solicitante",
        e."Estado_Tipo" AS "Estado",
        pr."Prioridad_Tipo" AS "Prioridad",
        p."Pedido_Fecha" AS "Fecha del Pedido", 
        p."Pedido_FechaLimite" AS "Fecha Límite"
    FROM public."Pedido" p
    INNER JOIN public."Area" a ON a."Area_Id" = p."Area_Id"
    INNER JOIN public."Estado" e ON e."Estado_Id" = p."Estado_Id"
    INNER JOIN public."Prioridad" pr ON p."Prioridad_Id" = p."Prioridad_Id"
    ORDER BY p."Pedido_FechaLimite" DESC;
    ```

---

**Código Requerimiento:** R-010

**Código Interfaz:** I-012

**Imagen Interfaz**

<div>
<img src=".\resources\prototipo\I-012.jpeg" alt="I-012" style="width: 50%; height: auto;"/>
</div>

**Sentencias SQL**

**Eventos:**

1. **Carga de Página:**

    Se llenará la tabla:
    ```sql
    SELECT
        m."Pedido_Id" AS "Pedido",
        m."Migracion_Id" AS "Migración",
        s.nombre_squad AS "Squad Encargado", 
        t.nombre_tecnologia AS "Tecnología Usada",
        m."Fecha_migracion" AS "Fecha"
    FROM public."Migracion" m
    INNER JOIN public."Squad" s ON s.id_squad = m."Id_Squad"
    INNER JOIN public."Tecnologia" t ON t.id_tecnologia = m."Id_Tecnologia"
    ORDER BY m."Fecha_migracion";
    ```

    Se llenará la lista de pedidos a seleccionar:
    ```sql
    SELECT "Pedido_Id"
    FROM public."Pedido";
    ```

2. **Botón Buscar:**
    Cuando el usuario presione el botón buscar se filtrará la tabla por el pedido seleccionado:
    ```sql
    SELECT
        m."Migracion_Id" AS "Migración",
        m."Pedido_Id" AS "Pedido",
        s.nombre_squad AS "Squad Encargado", 
        t.nombre_tecnologia AS "Tecnología Usada",
        m."Fecha_migracion" AS "Fecha"
    FROM public."Migracion" m
    INNER JOIN public."Squad" s ON s.id_squad = m."Id_Squad"
    INNER JOIN public."Tecnologia" t ON t.id_tecnologia = m."Id_Tecnologia"
    WHERE m."Pedido_Id" = <1>
    ORDER BY m."Fecha_migracion";
    ```

    Donde `<1>` corresponde al código de pedido seleccionado.


### Adicción de Pedidos y de Migraciones

---

**Código Requerimiento:** R-012

**Código Interfaz:** I-013

**Imagen Interfaz**

<div>
<img src=".\resources\prototipo\I-013.jpeg" alt="I-013" style="width: 50%; height: auto;"/>
</div>

**Sentencias SQL**

**Eventos:**

1. **Cargar Página:**

    Se llenará la lista de áreas a seleccionar:
    ```sql
    SELECT "Area_Id", "Area_Nombre" 
    FROM public."Area";
    ```

    Se llenará la lista de estados a seleccionar:
    ```sql
    SELECT "Estado_Id", "Estado_Tipo"
    FROM public."Estado";
    ```

    Se llenará la lista de prioridad a seleccionar:
    ```sql
    SELECT "Prioridad_Id", "Prioridad_Tipo" 
    FROM public."Prioridad";
    ```

2. **Botón Agregar:**
    Se agregará un nuevo registro a la tabla de pedidos.
    ```sql
    INSERT INTO public."Pedido"( "Area_Id", "Prioridad_Id", "Estado_Id", "Pedido_Fecha", "Pedido_FechaLimite")
        VALUES 
        (<1>, <2>, <3>, <4>, CURRENT_DATE);
    ```
    Donde `<1>` corresponde al código de área seleccionado.

    Donde `<2>` corresponde al código de estado seleccionado.

    Donde `<3>` corresponde al código de prioridad seleccionado.

    Donde `<4>` se capturarán de la interfaz de usuario.

---

**Código Requerimiento:** R-013

**Código Interfaz:** I-014

**Imagen Interfaz**

<div>
<img src=".\resources\prototipo\I-014.jpeg" alt="I-014" style="width: 50%; height: auto;"/>
</div>

**Sentencias SQL**

**Eventos:**

1. **Cargar Página:**

    Se llenará la lista de pedidos a seleccionar:
    ```sql
    SELECT "Pedido_Id"
    FROM public."Pedido";
    ```

    Se llenará la lista de squads a seleccionar:
    ```sql
    SELECT id_squad, nombre_squad 
    FROM public."Squad";
    ```

    Se llenará la lista de tecnologías a seleccionar:
    ```sql
    SELECT id_tecnologia, nombre_tecnologia 
    FROM public."Tecnologia";
    ```

2. **Botón Agregar:**

    Se agregará un nuevo registro a la tabla de pedidos.
    ```sql
    INSERT INTO public."Migracion"(
        "Pedido_Id", "Id_Squad", "Id_Tecnologia", "Entorno", "Fecha_migracion", "Valido", "Ultimo")
        VALUES (<1>, <2>, <3>, <4>, CURRENT_DATE, 1, 1);
    ```
    Donde `<1>` corresponde al código de pedido seleccionado.

    Donde `<2>` corresponde al código de squad seleccionado.

    Donde `<3>` corresponde al código de tecnología seleccionado.

    Donde `<4>` se capturarán de la interfaz de usuario.



[Regresar al índice](Indice.md)